We centralize in this section \textbf{most} computations relative to the number of non-stack-rows and the associated peeking flags.
We exclude the case of (unexceptional, unaborted) \inst{CALL}'s to \textbf{precompiles}.
Those scenarios take more care and depend on various factors, including which precompile is being executed.

We start by defining a series of peeking flag shorthands:
\begin{description}
	\item[\underline{Standard and extended \inst{CALL} flag prefixes:}]
		we define
		\[
			\left\{ \begin{array}{lcl}
				\standardPeekingSumForCalls & \define &
				\left[ \begin{array}{cr}
					+ & \peekScenario     _{i + \callFirstScenarioRowOffset}        \\
					+ & \peekContext      _{i + \callCurrentContextRowOffset}       \\
					+ & \peekMisc         _{i + \callMiscRowOffset}                 \\
				\end{array} \right]
				\vspace{2mm} \\
				\extendedPeekingSumForCalls & \define &
				\left[ \begin{array}{cr}
					+ & \standardPeekingSumForCalls                                     \\
					+ & \peekAccount _{i + \callFirstCallerAccountRowOffset           } \\
					+ & \peekAccount _{i + \callFirstCalleeAccountRowOffset           } \\
					+ & \peekAccount _{i + \callFirstDelegateOrCalleeAccountRowOffset } \\
				\end{array} \right]
				\\
			\end{array} \right.
		\]
		\saNote{}
		For context,
		\begin{itemize}
			\item account-row $n°(i + \callFirstCallerAccountRowOffset           )$ pertains to the caller,
			\item account-row $n°(i + \callFirstCalleeAccountRowOffset           )$ pertains to the callee,
			\item account-row $n°(i + \callFirstDelegateOrCalleeAccountRowOffset )$ pertains to the delegate or the callee (again);
		\end{itemize}
	\item[\underline{Exception: \staticxSH{}:}]
		we define
		\[
			\peekingSumStaticx
			\define
			\left[ \begin{array}{cr}
				+ & \standardPeekingSumForCalls                                 \\
				+ & \peekContext      _{i + \callStaticxUpdateParentContextRowOffset} \\
			\end{array} \right]
		\]
	\item[\underline{Exception: \mxpxSH{}:}]
		we define
		\[
			\peekingSumMxpx
			\define
			\left[ \begin{array}{cr}
				+ & \standardPeekingSumForCalls                              \\
				+ & \peekContext      _{i + \callMxpxUpdateParentContextRowOffset} \\
			\end{array} \right]
		\]
	\item[\underline{Exception: \oogxSH{}:}]
		we define
		\[
			\peekingSumOogx
			\define
			\left[ \begin{array}{cr}
				+ & \extendedPeekingSumForCalls                                    \\
				+ & \peekContext      _{i + \callOogxUpdateParentContextRowOffset} \\
			\end{array} \right]
		\]
		\saNote{}
		There is, \emph{a priori}, no necessity to load two account-rows to justify an \oogxSH{}.
		Loading the callee account is sufficient.
		From that single account we are able to determine whether the callee \textbf{exists} and whether it is \textbf{warm} or not.
		Yet we load both the caller and callee accounts as this makes our treatment of account rows more uniform.
		The cost is an extraeneous account row for the rare \inst{CALL}-instruction which raises an \oogxSH{} (and no other exception.)
	\item[\underline{Aborted call, caller context will revert:}]
		we define
		\[
			\peekingSumAbortWillRevert
			\define
			\left[ \begin{array}{cr}
				+ & \extendedPeekingSumForCalls                                                     \\
				+ & \peekAccount _{i + \callSecondCalleeAccountRowOffsetAbortWillRevert           } \\
				+ & \peekAccount _{i + \callSecondDelegateOrCalleeAccountRowOffsetAbortWillRevert } \\
				+ & \peekContext _{i + \callAbortWillRevertUpdateCurrentContextRowOffset          } \\
			\end{array} \right]
		\]
		\saNote{}
		For context,
		\begin{itemize}
			\item account-row $n°(i + \callSecondCalleeAccountRowOffsetAbortWillRevert           )$ pertains to the callee,
			\item account-row $n°(i + \callSecondDelegateOrCalleeAccountRowOffsetAbortWillRevert )$ pertains to the delegate or callee,
		\end{itemize}
		Both may have seen their warmth turned on, and this operation must be undone at ``\inst{REVERT}-time''.
	\item[\underline{Aborted call, caller context won't revert:}]
		we define
		\[
			\peekingSumAbortWontRevert
			\define
			\left[ \begin{array}{cr}
				+ & \extendedPeekingSumForCalls                                                \\
				+ & \peekContext      _{i + \callAbortWontRevertUpdateCurrentContextRowOffset} \\
			\end{array} \right]
		\]
	\item[\underline{(Successful) call to Externally Owned Account, caller context will revert:}]
		we define
		\[
			\peekingSumEoaWillRevert
			\define
			\left[ \begin{array}{cr}
				+ & \extendedPeekingSumForCalls                                      \\
				+ & \peekAccount _{i + \callSecondCallerAccountRowOffset           } \\
				+ & \peekAccount _{i + \callSecondCalleeAccountRowOffset           } \\
				+ & \peekAccount _{i + \callSecondDelegateOrCalleeAccountRowOffset } \\
				+ & \peekContext _{i + \callEoaWillRevertCallerContextRowOffset    } \\
			\end{array} \right]
		\]
		\saNote{}
		For context,
		\begin{itemize}
			\item account-row $n°(i + \callSecondCallerAccountRowOffset           )$ pertains to the caller, at ``\inst{REVERT}-time''
			\item account-row $n°(i + \callSecondCalleeAccountRowOffset           )$ pertains to the callee, at ``\inst{REVERT}-time''
			\item account-row $n°(i + \callSecondDelegateOrCalleeAccountRowOffset )$ pertains to the delegate or the callee, at ``\inst{REVERT}-time''
		\end{itemize}
		With successful \textsc{eoa}-calls that are rolled-back one must
		undo balance transfers but also
		undo changes to the warmth of the callee and potentially the delegate.
		All of these changes happen at ``\inst{REVERT}-time''.
	\item[\underline{(Successful) call to Externally Owned Account, caller context won't revert:}]
		we define
		\[
			\peekingSumEoaWontRevert
			\define
			\left[ \begin{array}{cr}
				+ & \extendedPeekingSumForCalls                                       \\
				+ & \peekContext      _{i + \callEoaWontRevertCallerContextRowOffset} \\
			\end{array} \right]
		\]
	\item[\underline{Smart contract call failure, caller context will revert:}]
		we define
		\[
			\peekingSumSmcFailureWillRevert
			\define
			\left[ \begin{array}{cr}
				+ & \extendedPeekingSumForCalls                                                    \\
				+ & \peekAccount _{i + \callSecondCallerAccountRowOffset                         } \\
				+ & \peekAccount _{i + \callSecondCalleeAccountRowOffset                         } \\
				+ & \peekAccount _{i + \callThirdCalleeAccountRowOffset                          } \\
				+ & \peekAccount _{i + \callThirdDelegateOrCalleeAccountRowOffset                } \\
				+ & \peekContext _{i + \callSmcFailureWillRevertInitializeCalleeContextRowOffset } \\
			\end{array} \right]
		\]
		\saNote{}
		For context,
		\begin{itemize}
			\item account-row $n°(i + \callSecondCallerAccountRowOffset          )$ pertains to the caller, at ``\inst{FAILURE}-time''
			\item account-row $n°(i + \callSecondCalleeAccountRowOffset          )$ pertains to the callee, at ``\inst{FAILURE}-time''
			\item account-row $n°(i + \callThirdCalleeAccountRowOffset           )$ pertains to the callee, at ``\inst{REVERT}-time''
			\item account-row $n°(i + \callThirdDelegateOrCalleeAccountRowOffset )$ pertains to the delegate or the callee, at ``\inst{REVERT}-time''
		\end{itemize}
		With failure \textsc{smc}-calls that are rolled-back one must
		undo balance transfers at the point in time when the \inst{CALL} ``fails'',
		i.e. at ``\inst{FAILURE}-time'',
		but also undo changes to the warmth of the callee
		and potentially undo warmth changes to the delegate, both at ``\inst{REVERT}-time''.
	\item[\underline{Smart contract call failure, caller context won't revert:}]
		we define
		\[
			\peekingSumSmcFailureWontRevert
			\define
			\left[ \begin{array}{cr}
				+ & \extendedPeekingSumForCalls                                                        \\
				+ & \peekAccount      _{i + \callSecondCallerAccountRowOffset}                         \\
				+ & \peekAccount      _{i + \callSecondCalleeAccountRowOffset}                         \\
				+ & \peekContext      _{i + \callSmcFailureWontRevertInitializeCalleeContextRowOffset} \\
			\end{array} \right]
		\]
		\saNote{}
		For context,
		\begin{itemize}
			\item account-row $n°(i + \callSecondCallerAccountRowOffset )$ pertains to the caller, at ``\inst{FAILURE}-time''
			\item account-row $n°(i + \callSecondCalleeAccountRowOffset )$ pertains to the callee, at ``\inst{FAILURE}-time''
		\end{itemize}
		With failure \textsc{smc}-calls that don't revert,
		one must undo balance transfers at the point in time when the \inst{CALL} ``fails'',
		i.e. at ``\inst{FAILURE}-time'',
		and nothing else.
	\item[\underline{Smart contract call success, caller context will revert:}]
		we define
		\[
			\peekingSumSmcSuccessWillRevert
			\define
			\left[ \begin{array}{cr}
				+ & \extendedPeekingSumForCalls                                                    \\
				+ & \peekAccount _{i + \callSecondCallerAccountRowOffset                         } \\
				+ & \peekAccount _{i + \callSecondCalleeAccountRowOffset                         } \\
				+ & \peekAccount _{i + \callSecondDelegateOrCalleeAccountRowOffset               } \\
				+ & \peekContext _{i + \callSmcSuccessWillRevertInitializeCalleeContextRowOffset } \\
			\end{array} \right]
		\]
		\saNote{}
		For context,
		\begin{itemize}
			\item account-row $n°(i + \callSecondCallerAccountRowOffset           )$ pertains to the caller, at ``\inst{REVERT}-time''
			\item account-row $n°(i + \callSecondCalleeAccountRowOffset           )$ pertains to the callee, at ``\inst{REVERT}-time''
			\item account-row $n°(i + \callSecondDelegateOrCalleeAccountRowOffset )$ pertains to the delegate or the callee, at ``\inst{REVERT}-time''
		\end{itemize}
		With successful \textsc{smc}-calls that do revert,
		one must undo balance transfers in the caller and callee,
		but also warmth updates in the callee and potentially the delegate,
		all at once at ``\inst{REVERT}-time''.
	\item[\underline{Smart contract call success, caller context won't revert:}]
		we define
		\[
			\peekingSumSmcSuccessWontRevert
			\define
			\left[ \begin{array}{cr}
				+ & \extendedPeekingSumForCalls                                                        \\
				+ & \peekContext      _{i + \callSmcSuccessWontRevertInitializeCalleeContextRowOffset} \\
			\end{array} \right]
		\]
\end{description}
