% !TeX TS-program = lualatex
\documentclass[varwidth=\maxdimen,margin=0.5cm,multi={verbatim}]{standalone}

\usepackage{fontspec}
\directlua{luaotfload.add_fallback
   ("emojifallback",
    {
      "NotoColorEmoji:mode=harf;"
    }
   )}

\usepackage{../../../../../../pkg/draculatheme}

\setmonofont{JetBrains Mono NL Regular}[
  RawFeature={fallback=emojifallback}
]

\begin{document}
\begin{verbatim}

‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\  ‚ñà‚ñà\       ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\                                                                                  ‚ñà‚ñà\ ‚ñà‚ñà\
‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà |     ‚ñà‚ñà  __‚ñà‚ñà\                                                                                 \__|‚ñà‚ñà |
‚ñà‚ñà |  ‚ñà‚ñà |‚ñà‚ñà |     ‚ñà‚ñà /  \__|       ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\‚ñà‚ñà‚ñà‚ñà\   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\  ‚ñà‚ñà\ ‚ñà‚ñà | ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\
‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\ |‚ñà‚ñà |     \‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\        ‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà  _____|‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà  _‚ñà‚ñà  _‚ñà‚ñà\ ‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà |‚ñà‚ñà |‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà  _____|
‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà |      \____‚ñà‚ñà\       ‚ñà‚ñà /  ‚ñà‚ñà |‚ñà‚ñà |  \__|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà |‚ñà‚ñà /      ‚ñà‚ñà /  ‚ñà‚ñà |‚ñà‚ñà / ‚ñà‚ñà / ‚ñà‚ñà |‚ñà‚ñà /  ‚ñà‚ñà |‚ñà‚ñà |‚ñà‚ñà |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà |\‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\
‚ñà‚ñà |  ‚ñà‚ñà |‚ñà‚ñà |     ‚ñà‚ñà\   ‚ñà‚ñà |      ‚ñà‚ñà |  ‚ñà‚ñà |‚ñà‚ñà |      ‚ñà‚ñà   ____|‚ñà‚ñà |      ‚ñà‚ñà |  ‚ñà‚ñà |‚ñà‚ñà | ‚ñà‚ñà | ‚ñà‚ñà |‚ñà‚ñà |  ‚ñà‚ñà |‚ñà‚ñà |‚ñà‚ñà |‚ñà‚ñà   ____| \____‚ñà‚ñà\
‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\\‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |‚ñà‚ñà |      \‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\ \‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\ \‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |‚ñà‚ñà | ‚ñà‚ñà | ‚ñà‚ñà |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |‚ñà‚ñà |‚ñà‚ñà |\‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |
\_______/ \________|\______/       ‚ñà‚ñà  ____/ \__|       \_______| \_______| \______/ \__| \__| \__|‚ñà‚ñà  ____/ \__|\__| \_______|\_______/
                                   ‚ñà‚ñà |                                                            ‚ñà‚ñà |
                                   ‚ñà‚ñà |                                                            ‚ñà‚ñà |
                                   \__|                                                            \__|



          __|   _ \   __ `__ \   __ `__ \    _ \   __ \
         (     (   |  |   |   |  |   |   |  (   |  |   |
        \___| \___/  _|  _|  _| _|  _|  _| \___/  _|  _|


|-------+--------+-----------------------------------+------------------------------------------------------------|
| Row   | Persp. |                                   |                                                            |
|-------+--------+-----------------------------------+------------------------------------------------------------|
| i     | SCEN   | scen/PRC_POINT_EVALUATION         | SCEN/PRC_SUCCESS ‚à® SCEN/PRC_FKTH ‚à® SCEN/PRC_FKTR ‚â° true    |
|       |        | scen/PRC_G1ADD                    |                                                            |
|       |        | scen/PRC_G1MSM                    |                                                            |
|       |        | scen/PRC_G2ADD                    |                                                            |
|       |        | scen/PRC_G2MSM                    |                                                            |
|       |        | scen/PRC_PAIRING_CHECK            |                                                            |
|       |        | scen/PRC_MAP_FP_TO_G1             |                                                            |
|       |        | scen/PRC_MAP_FP_TO_G2             |                                                            |
|       |        | scen/PRC_P256_VERIFY              |                                                            |
|-------+--------+-----------------------------------+------------------------------------------------------------|
| i + 1 | MISC   |                                   | OOBüö© = 1                                                  |
|       |        |                                   | OOB_INST =  ‚ü¶OOB_INST_point_evaluation‚üß                    |
|       |        |                                   | .           ‚à®  ‚ü¶OOB_INST_g1add‚üß                            |
|       |        |                                   | .           ‚à®  ‚ü¶OOB_INST_g1msm‚üß                            |
|       |        |                                   | .           ‚à®  ‚ü¶OOB_INST_g2add‚üß                            |
|       |        |                                   | .           ‚à®  ‚ü¶OOB_INST_g2msm‚üß                            |
|       |        |                                   | .           ‚à®  ‚ü¶OOB_INST_pairing_check‚üß                    |
|       |        |                                   | .           ‚à®  ‚ü¶OOB_INST_map_fp_to_g1‚üß                     |
|       |        |                                   | .           ‚à®  ‚ü¶OOB_INST_map_fp_to_g2‚üß                     |
|       |        |                                   | .           ‚à®  ‚ü¶OOB_INST_p256_verify‚üß                      |
|       |        |                                   |                                                            |
|       |        |                                   | TRUSTED INPUTS:                                            |
|       |        |                                   | * cds                                                      |
|       |        |                                   | * r@c                                                      |
|       |        |                                   | * call_gas                                                 |
|       |        |                                   |                                                            |
|       |        |                                   | JUSTIFICATION FOR:                                         |
|       |        |                                   | * (implicit) compute gas_cost                              |
|       |        |                                   | * hub_success       ‚â°  [gas_cost ‚â§ call_gas]               |
|       |        |                                   | .                      ‚àß  [valid_cds]                      |
|       |        |                                   | * extract_call_data ‚â°  hub_success ‚àß [cds ‚â† 0]             |
|       |        |                                   | .                   ‚â°  hub_success                         |
|       |        |                                   | * empty_call_data   ‚â°  hub_success ‚àß [cds = 0]             |
|       |        |                                   | .                   ‚â°  FALSE                               |
|       |        |                                   | * return_gas        ‚â°  hub_success ? [call_gas - gas_cost] |
|       |        |                                   | .                                  : 0                     |
|       |        |                                   | * r@c_nonzero       ‚â°  [r@c ‚â† 0]                           |
|       |        |                                   |                                                            |
|       |        | MMUüö© = hub_success               |                                                            |
|       |        | MMU_INST = <RETURN_like>          |                                                            |
|       |        |                                   |                                                            |
|       |        | ID_SCR  := CN                     |                                                            |
|       |        | SRC_OFF := CDO                    |                                                            |
|       |        | SIZE    := CDS                    |                                                            |
|       |        |                                   |                                                            |
|       |        | ID_TGT  := 1 + HUB_STAMP          |                                                            |
|       |        | TGT_OFF := 0                      |                                                            |
|       |        |                                   |                                                            |
|       |        | ram_success := 0 / 1 (prediction) |                                                            |
|-------+--------+-----------------------------------+------------------------------------------------------------|


NOTE. We use ‚àß to denote logical conjunction ('AND'), and ‚à® to denote logical disjunction ('OR'). We further use
(standard) ternary operator notation

      condition ? val_T
                : val_F

to denote the integer that equals 'val_T' whenever 'condition' is 'true', and 'val_F' whenever 'condition' is 'false'.


NOTE. The BLS precompiles and P256_Verify added with

+ EIP-4844:
    - POINT_EVALUATION
+ EIP-2537:
    - G1ADD          - G2ADD          - PAIRING_CHECK
    - G1MSM          - G2MSM
    - MAP_FP_TO_G1   - MAP_FP_TO_G2
+ EIP-7951:
    - P256_VERIFY
all have the nice-to-have property that providing them with empty call data, and more generally: call data that isn't the right
(prescribed) size in bytes or a (nonzero) multiple of some reference size, results in a failure (FAILURE_KNOWN_TO_HUB in the
way we arithmetize things) of the precompile, and thus the precompile burning all provided gas, clearing out its caller's
return data, and outputting ZERO onto the caller's stack.


NOTE. For BLS operations we have special relations:

* extract_call_data ‚â° hub_success
* empty_call_data   ‚â° FALSE

\end{verbatim}
\end{document}
