% !TeX TS-program = lualatex
\documentclass[varwidth=\maxdimen,margin=0.5cm,multi={verbatim}]{standalone}

\usepackage{fontspec}
\directlua{luaotfload.add_fallback
   ("emojifallback",
    {
      "NotoColorEmoji:mode=harf;"
    }
   )}

\usepackage{../../../../../../pkg/draculatheme}

\setmonofont{JetBrains Mono NL Regular}[
  RawFeature={fallback=emojifallback}
]

\begin{document}
\begin{verbatim}

                       
                       ██\      ██\  ██████\  ███████\  ████████\ ██\   ██\ ███████\         
                       ███\    ███ |██  __██\ ██  __██\ ██  _____|██ |  ██ |██  __██\        
                       ████\  ████ |██ /  ██ |██ |  ██ |██ |      \██\ ██  |██ |  ██ |       
                       ██\██\██ ██ |██ |  ██ |██ |  ██ |█████\     \████  / ███████  |       
                       ██ \███  ██ |██ |  ██ |██ |  ██ |██  __|    ██  ██<  ██  ____/        
                       ██ |\█  /██ |██ |  ██ |██ |  ██ |██ |      ██  /\██\ ██ |             
                       ██ | \_/ ██ | ██████  |███████  |████████\ ██ /  ██ |██ |             
                       \__|     \__| \______/ \_______/ \________|\__|  \__|\__|             
                                                                                             
                                                                                             
                                                                                             
                                                                                             
                                                                                             
                        ███████\ ██\   ██\  ███████\  ███████\  ██████\   ███████\  ███████\ 
                       ██  _____|██ |  ██ |██  _____|██  _____|██  __██\ ██  _____|██  _____|
                       \██████\  ██ |  ██ |██ /      ██ /      ████████ |\██████\  \██████\  
                        \____██\ ██ |  ██ |██ |      ██ |      ██   ____| \____██\  \____██\ 
                       ███████  |\██████  |\███████\ \███████\ \███████\ ███████  |███████  |
                       \_______/  \______/  \_______| \_______| \_______|\_______/ \_______/
                       

|--------+--------+-------------------------------------------+--------------------------------------|
| Row    | Persp. |                                           |                                      |
|--------+--------+-------------------------------------------+--------------------------------------|
| i      | SCEN   | SCEN/MODEXP                               | SUCCESS ✅                           |
|--------+--------+-------------------------------------------+--------------------------------------|
|        |        | common constraints                        |                                      |
|--------+--------+-------------------------------------------+--------------------------------------|
|--------+--------+-------------------------------------------+--------------------------------------|
| i + 7  | MISC   |                                           | OOB🏴 = 1                            |
|        |        |                                           | OOB_INST = ⟦OOB_INST_modexp_extract⟧ |
|        |        |                                           |                                      |
|        |        |                                           | TRUSTED INPUTS:                      |
|        |        |                                           | * cds                                |
|        |        |                                           | * bbs_lo                             |
|        |        |                                           | * ebs_lo                             |
|        |        |                                           | * mbs_lo                             |
|        |        |                                           |                                      |
|        |        |                                           | JUSTIFICATION FOR:                   |
|        |        |                                           | * extract_base                       |
|        |        |                                           | * extract_exponent                   |
|        |        |                                           | * extract_modulus                    |
|        |        |                                           |                                      |
|        |        | MMU🏴 = extract_modulus                   |                                      |
|        |        |                                           |                                      |
|        |        | If extract_base = 1:                      |                                      |
|        |        | MMU_INST = ⟦MMU_INST_modexpData⟧          |                                      |
|        |        |                                           |                                      |
|        |        | If extract_base = 0:                      |                                      |
|        |        | MMU_INST = ⟦MMU_INST_modexpZero⟧          |                                      |
|        |        |                                           |                                      |
|        |        | SRC_ID        = cn                        |                                      |
|        |        | SRC_OFFSET_LO = 96                        |                                      |
|        |        | SIZE          = bbs_lo                    |                                      |
|        |        | TGT_ID        = 1 + HUB_                 |                                      |
|        |        | TGT_OFFSET_LO = 0                         |                                      |
|        |        | EXO_SUM       = ⟦1 << modexpdata⟧         |                                      |
|        |        | PHASE         = Φ_base                    |                                      |
|--------+--------+-------------------------------------------+--------------------------------------|
| i + 8  | MISC   | MMU🏴 = extract_modulus                   | OOB🏴 = 0                            |
|        |        |                                           |                                      |
|        |        | If extract_exponent = 1:                  |                                      |
|        |        | MMU_INST = ⟦MMU_INST_modexpData⟧          |                                      |
|        |        |                                           |                                      |
|        |        | If extract_exponent = 0:                  |                                      |
|        |        | MMU_INST = ⟦MMU_INST_modexpZero⟧          |                                      |
|        |        |                                           |                                      |
|        |        | SRC_ID        = cn                        |                                      |
|        |        | SRC_OFFSET_LO = 96 + bbs_lo               |                                      |
|        |        | SIZE          = ebs_lo                    |                                      |
|        |        | TGT_ID        = 1 + HUB_                 |                                      |
|        |        | TGT_OFFSET_LO = 0                         |                                      |
|        |        | EXO_SUM       = ⟦1 << modexpdata⟧         |                                      |
|        |        | PHASE         = Φ_exponent                |                                      |
|--------+--------+-------------------------------------------+--------------------------------------|
| i + 9  | MISC   | MMU🏴 = extract_modulus                   | OOB🏴 = 0                            |
|        |        |                                           |                                      |
|        |        | If extract_modulus = 1:                   |                                      |
|        |        | MMU_INST = ⟦MMU_INST_modexpData⟧          |                                      |
|        |        |                                           |                                      |
|        |        | If extract_modulus = 0:                   |                                      |
|        |        | MMU_INST = ⟦MMU_INST_modexpZero⟧          |                                      |
|        |        |                                           |                                      |
|        |        | SRC_ID        = cn                        |                                      |
|        |        | SRC_OFFSET_LO = 96 + bbs_lo + ebs_lo      |                                      |
|        |        | SIZE          = mbs_lo                    |                                      |
|        |        | TGT_ID        = 1 + HUB_                 |                                      |
|        |        | TGT_OFFSET_LO = 0                         |                                      |
|        |        | EXO_SUM       = ⟦1 << modexpdata⟧         |                                      |
|        |        | PHASE         = Φ_modulus                 |                                      |
|--------+--------+-------------------------------------------+--------------------------------------|
| i + 10 | MISC   | MMU🏴 = extract_modulus                   | OOB🏴 = 0                            |
|        |        | MMU_INST = ⟦MMU_INST_exoToRamTransplants⟧ |                                      |
|        |        |                                           |                                      |
|        |        | SRC_ID  = 1 + HUB_                       |                                      |
|        |        | TGT_ID  = 1 + HUB_                       |                                      |
|        |        | SIZE    = 512                             |                                      |
|        |        | PHASE   = Φ_modexp_res                    |                                      |
|        |        | EXO_SUM = ⟦1 << modexpdata⟧               |                                      |
|--------+--------+-------------------------------------------+--------------------------------------|
| i + 11 | MISC   | MMU🏴 = mbs_nonzero ∧ r@c_nonzero         | OOB🏴 = 0                            |
|        |        | MMU_INST = MODEXP_copy_partial_result     |                                      |
|        |        |                                           |                                      |
|        |        | SRC_ID = 1 + HUB_                        |                                      |
|        |        | TGT_ID = CN                               |                                      |
|        |        |                                           |                                      |
|        |        | OFFSET_1    = r@o                         |                                      |
|        |        | SIZE_1      = r@c                         |                                      |
|        |        | REF_OFFSET  = 512 - mbs                   |                                      |
|        |        | REF_SIZE    = mbs                         |                                      |
|--------+--------+-------------------------------------------+--------------------------------------|
| i + 12 | CON    | updateReturnData()                        |
|        |        |                                           |
|        |        | RETURNER           = 1 + HUB_            |
|        |        | RETURN_DATA_OFFSET = 512 - mbs            |
|        |        | RETURN_DATA_SIZE   = mbs                  |
|        |        |                                           |
|        |        | Note: this works ALWAYS.                  |
|--------+--------+-------------------------------------------|
\end{verbatim}
\end{document}
Φ_base     
Φ_exponent 
Φ_modulus  
