% !TeX TS-program = lualatex
\documentclass[varwidth=\maxdimen,margin=0.5cm,multi={verbatim}]{standalone}

\usepackage{../../../../../../pkg/draculatheme}

\usepackage{fontspec}
\directlua{luaotfload.add_fallback
   ("emojifallback",
    {
      "NotoColorEmoji:mode=harf;"
    }
   )}

\setmonofont{JetBrains Mono NL Regular}[
  RawFeature={fallback=emojifallback}
]

\begin{document}
\begin{verbatim}

                              ‚ñà‚ñà\           ‚ñà‚ñà\       ‚ñà‚ñà\                           ‚ñà‚ñà\
                              \__|          ‚ñà‚ñà |      ‚ñà‚ñà |                          \__|
‚ñà‚ñà\    ‚ñà‚ñà\ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\  ‚ñà‚ñà\  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\  ‚ñà‚ñà | ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\         ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\ ‚ñà‚ñà\ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\
\‚ñà‚ñà\  ‚ñà‚ñà  |\____‚ñà‚ñà\ ‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà | \____‚ñà‚ñà\ ‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà |‚ñà‚ñà  __‚ñà‚ñà\       ‚ñà‚ñà  _____|‚ñà‚ñà |\____‚ñà‚ñà  |‚ñà‚ñà  __‚ñà‚ñà\
 \‚ñà‚ñà\‚ñà‚ñà  / ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà |‚ñà‚ñà |  \__|‚ñà‚ñà | ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà |‚ñà‚ñà |  ‚ñà‚ñà |‚ñà‚ñà |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà |      \‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\  ‚ñà‚ñà |  ‚ñà‚ñà‚ñà‚ñà _/ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà |
  \‚ñà‚ñà‚ñà  / ‚ñà‚ñà  __‚ñà‚ñà |‚ñà‚ñà |      ‚ñà‚ñà |‚ñà‚ñà  __‚ñà‚ñà |‚ñà‚ñà |  ‚ñà‚ñà |‚ñà‚ñà |‚ñà‚ñà   ____|       \____‚ñà‚ñà\ ‚ñà‚ñà | ‚ñà‚ñà  _/   ‚ñà‚ñà   ____|
   \‚ñà  /  \‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà |‚ñà‚ñà |      ‚ñà‚ñà |\‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |‚ñà‚ñà |\‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\       ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |‚ñà‚ñà |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\ \‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\
    \_/    \_______|\__|      \__| \_______|\_______/ \__| \_______|      \_______/ \__|\________| \_______|



                                ‚ñà‚ñà\            ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\
                                ‚ñà‚ñà |          ‚ñà‚ñà  __‚ñà‚ñà\
 ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\         ‚ñà‚ñà /  \__| ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\ ‚ñà‚ñà\   ‚ñà‚ñà\ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\
‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà  _____|\_‚ñà‚ñà  _|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\ ‚ñà‚ñà |       \____‚ñà‚ñà\ ‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà  _____|‚ñà‚ñà |  ‚ñà‚ñà |‚ñà‚ñà  __‚ñà‚ñà\
‚ñà‚ñà /  ‚ñà‚ñà |‚ñà‚ñà /  ‚ñà‚ñà |\‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\    ‚ñà‚ñà |  \______|‚ñà‚ñà |       ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà |‚ñà‚ñà |  ‚ñà‚ñà |‚ñà‚ñà /      ‚ñà‚ñà |  ‚ñà‚ñà |‚ñà‚ñà |  ‚ñà‚ñà |
‚ñà‚ñà |  ‚ñà‚ñà |‚ñà‚ñà |  ‚ñà‚ñà | \____‚ñà‚ñà\   ‚ñà‚ñà |‚ñà‚ñà\       ‚ñà‚ñà |  ‚ñà‚ñà\ ‚ñà‚ñà  __‚ñà‚ñà |‚ñà‚ñà |  ‚ñà‚ñà |‚ñà‚ñà |      ‚ñà‚ñà |  ‚ñà‚ñà |‚ñà‚ñà |  ‚ñà‚ñà |
‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |\‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |  \‚ñà‚ñà‚ñà‚ñà  |      \‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |\‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà |‚ñà‚ñà |  ‚ñà‚ñà |\‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\ \‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |‚ñà‚ñà |  ‚ñà‚ñà |
‚ñà‚ñà  ____/  \______/ \_______/    \____/        \______/  \_______|\__|  \__| \_______| \______/ \__|  \__|
‚ñà‚ñà |
‚ñà‚ñà |
\__|
                                                                          ‚ñà‚ñà\ ‚ñà‚ñà\
                                                                          \__|‚ñà‚ñà |
 ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\‚ñà‚ñà‚ñà‚ñà\   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\  ‚ñà‚ñà\ ‚ñà‚ñà | ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\
‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà  _____|‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà  _‚ñà‚ñà  _‚ñà‚ñà\ ‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà |‚ñà‚ñà |‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà  _____|
‚ñà‚ñà /  ‚ñà‚ñà |‚ñà‚ñà |  \__|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà |‚ñà‚ñà /      ‚ñà‚ñà /  ‚ñà‚ñà |‚ñà‚ñà / ‚ñà‚ñà / ‚ñà‚ñà |‚ñà‚ñà /  ‚ñà‚ñà |‚ñà‚ñà |‚ñà‚ñà |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà |\‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\
‚ñà‚ñà |  ‚ñà‚ñà |‚ñà‚ñà |      ‚ñà‚ñà   ____|‚ñà‚ñà |      ‚ñà‚ñà |  ‚ñà‚ñà |‚ñà‚ñà | ‚ñà‚ñà | ‚ñà‚ñà |‚ñà‚ñà |  ‚ñà‚ñà |‚ñà‚ñà |‚ñà‚ñà |‚ñà‚ñà   ____| \____‚ñà‚ñà\
‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |‚ñà‚ñà |      \‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\ \‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\ \‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |‚ñà‚ñà | ‚ñà‚ñà | ‚ñà‚ñà |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |‚ñà‚ñà |‚ñà‚ñà |\‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |
‚ñà‚ñà  ____/ \__|       \_______| \_______| \______/ \__| \__| \__|‚ñà‚ñà  ____/ \__|\__| \_______|\_______/
‚ñà‚ñà |                                                            ‚ñà‚ñà |
‚ñà‚ñà |                                                            ‚ñà‚ñà |
\__|                                                            \__|


          __|   _ \   __ `__ \   __ `__ \    _ \   __ \
         (     (   |  |   |   |  |   |   |  (   |  |   |
        \___| \___/  _|  _|  _| _|  _|  _| \___/  _|  _|

|-------+--------+------------------------------+------------------------------------------------------------|
| Row   | Persp. |                              |                                                            |
|-------+--------+------------------------------+------------------------------------------------------------|
| i     | SCEN   | one of:                      | SCEN/PRC_FKTH + SCEN/PRC_FKTR + SCEN/PRC_SUCCESS = 1       |
|       |        |                              |                                                            |
|       |        | starting with Prague:        |                                                            |
|       |        | * SCEN/BLS_G1MSM         = 1 |                                                            |
|       |        | * SCEN/BLS_G2MSM         = 1 |                                                            |
|       |        | * SCEN/BLS_PAIRING_CHECK = 1 |                                                            |
|       |        |                              |                                                            |
|-------+--------+------------------------------+------------------------------------------------------------|
| i + 1 | MISC   |                              | OOBüö© = 1                                                  |
|       |        |                              | OOB_INST (case dependent)                                  |
|       |        |                              | * ‚ü¶OOB_INST_bls_g1msm‚üß                                     |
|       |        |                              | * ‚ü¶OOB_INST_bls_g2msm‚üß                                     |
|       |        |                              | * ‚ü¶OOB_INST_bls_pairing_check‚üß                             |
|       |        |                              |                                                            |
|       |        |                              | TRUSTED INPUTS:                                            |
|       |        |                              | * cds                                                      |
|       |        |                              | * r@c                                                      |
|       |        |                              | * call_gas                                                 |
|       |        |                              |                                                            |
|       |        |                              | JUSTIFICATION FOR:                                         |
|       |        |                              | * (implicit) compute gas_cost                              |
|       |        |                              | * hub_success        ‚â°  [gas_cost ‚â§ call_gas]              |
|       |        |                              | .                       ‚àß [call data size = imposed_cds]   |
|       |        |                              | * return_gas         ‚â°  hub_success ? [call_gas - gas_cost]|
|       |        |                              | .                                   : 0                    |
|       |        |                              | * extract_call_data  ‚â°  hub_success ‚àß [cds ‚â† 0]            |
|       |        |                              | .                    ‚â°  hub_success                        |
|       |        |                              | * empty_call_data    ‚â°  hub_success ‚àß [cds = 0]            |
|       |        |                              | .                    ‚â°  FALSE                              |
|       |        |                              |                                                            |
|       |        | MMUüö© = extract_call_data    |                                                            |
|       |        | MMU_INST = <RETURN_like>     |                                                            |
|       |        |                              |                                                            |
|       |        | ID_SCR  := CN                |                                                            |
|       |        | SRC_OFF := CDO               |                                                            |
|       |        | SIZE    := CDS               |                                                            |
|       |        |                              |                                                            |
|       |        | ID_TGT  := 1 + HUB_STAMP     |                                                            |
|       |        | TGT_OFF := 0                 |                                                            |
|       |        |                              |                                                            |
|       |        | ram_success := 0 / 1         |                                                            |
|       |        |               (prediction)   |                                                            |
|-------+--------+------------------------------+------------------------------------------------------------|
| ...   | ...    | ...                          | ...                                                        |

We have used the following abbreviations:
  FKTH ‚â° scenario/FAILURE_KNOWN_TO_HUB
  FKTR ‚â° scenario/FAILURE_KNOWN_TO_RAM

NOTE. Depending on the case we use the notation " ‚à® " either as logical OR or as the maximum;
similarly we use the notation " ‚àß " as either logical AND or as the minimum. Which operation is
the intended one should be clear from context. We further use ternary operator notation

      condition ? val_T
                : val_F

NOTE. The BLS precompiles added with

+ EIP-2537:
    - G1MSM          - G2MSM
    - PAIRING_CHECK
all have the nice-to-have property that providing them with empty call data, and more generally: call data that isn't the right
(prescribed) size in bytes or a (nonzero) multiple of some reference size, results in a failure (FAILURE_KNOWN_TO_HUB in the
way we arithmetize things) of the precompile, and thus the precompile burning all provided gas, clearing out its caller's
return data, and outputting ZERO onto the caller's stack.

NOTE. For BLS and P256_Verify operations we have special relations:

* extract_call_data ‚â° hub_success
* empty_call_data   ‚â° FALSE
\end{verbatim}
\end{document}

