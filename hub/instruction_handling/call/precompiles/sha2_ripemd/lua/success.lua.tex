% !TeX TS-program = lualatex
\documentclass[varwidth=\maxdimen,margin=0.5cm,multi={verbatim}]{standalone}

\usepackage{fontspec}
\directlua{luaotfload.add_fallback
   ("emojifallback",
    {
      "NotoColorEmoji:mode=harf;"
    }
   )}

\usepackage{../../../../../../pkg/draculatheme}

\setmonofont{JetBrains Mono NF Regular}[
  RawFeature={fallback=emojifallback}
]

\begin{document}
\begin{verbatim}
       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\  â–ˆâ–ˆ\   â–ˆâ–ˆ\  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\             â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\
      â–ˆâ–ˆ  __â–ˆâ–ˆ\ â–ˆâ–ˆ |  â–ˆâ–ˆ |â–ˆâ–ˆ  __â–ˆâ–ˆ\ â–ˆâ–ˆ  __â–ˆâ–ˆ\           â–ˆâ–ˆ  __â–ˆâ–ˆ\ â–ˆâ–ˆ  ____| â–ˆâ–ˆ  __â–ˆâ–ˆ\
      â–ˆâ–ˆ /  \__|â–ˆâ–ˆ |  â–ˆâ–ˆ |â–ˆâ–ˆ /  â–ˆâ–ˆ |\__/  â–ˆâ–ˆ |          \__/  â–ˆâ–ˆ |â–ˆâ–ˆ |      â–ˆâ–ˆ /  \__|
      \â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\
       \____â–ˆâ–ˆ\ â–ˆâ–ˆ  __â–ˆâ–ˆ |â–ˆâ–ˆ  __â–ˆâ–ˆ |â–ˆâ–ˆ  ____/  \______| â–ˆâ–ˆ  ____/ \_____â–ˆâ–ˆ\ â–ˆâ–ˆ  __â–ˆâ–ˆ\
      â–ˆâ–ˆ\   â–ˆâ–ˆ |â–ˆâ–ˆ |  â–ˆâ–ˆ |â–ˆâ–ˆ |  â–ˆâ–ˆ |â–ˆâ–ˆ |                â–ˆâ–ˆ |      â–ˆâ–ˆ\   â–ˆâ–ˆ |â–ˆâ–ˆ /  â–ˆâ–ˆ |
      \â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  |â–ˆâ–ˆ |  â–ˆâ–ˆ |â–ˆâ–ˆ |  â–ˆâ–ˆ |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\           â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\ \â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  |
       \______/ \__|  \__|\__|  \__|\________|          \________| \______/  \______/


                                â–ˆâ–ˆ\
                                â–ˆâ–ˆ |
       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ |
       \____â–ˆâ–ˆ\ â–ˆâ–ˆ  __â–ˆâ–ˆ\ â–ˆâ–ˆ  __â–ˆâ–ˆ |
       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ |â–ˆâ–ˆ |  â–ˆâ–ˆ |â–ˆâ–ˆ /  â–ˆâ–ˆ |
      â–ˆâ–ˆ  __â–ˆâ–ˆ |â–ˆâ–ˆ |  â–ˆâ–ˆ |â–ˆâ–ˆ |  â–ˆâ–ˆ |
      \â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ |â–ˆâ–ˆ |  â–ˆâ–ˆ |\â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ |
       \_______|\__|  \__| \_______|


      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\ â–ˆâ–ˆ\      â–ˆâ–ˆ\ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\            â–ˆâ–ˆ\   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\
      â–ˆâ–ˆ  __â–ˆâ–ˆ\ \_â–ˆâ–ˆ  _|â–ˆâ–ˆ  __â–ˆâ–ˆ\ â–ˆâ–ˆ  _____|â–ˆâ–ˆâ–ˆ\    â–ˆâ–ˆâ–ˆ |â–ˆâ–ˆ  __â–ˆâ–ˆ\         â–ˆâ–ˆâ–ˆâ–ˆ | â–ˆâ–ˆ  __â–ˆâ–ˆ\ â–ˆâ–ˆâ–ˆ __â–ˆâ–ˆ\
      â–ˆâ–ˆ |  â–ˆâ–ˆ |  â–ˆâ–ˆ |  â–ˆâ–ˆ |  â–ˆâ–ˆ |â–ˆâ–ˆ |      â–ˆâ–ˆâ–ˆâ–ˆ\  â–ˆâ–ˆâ–ˆâ–ˆ |â–ˆâ–ˆ |  â–ˆâ–ˆ |        \_â–ˆâ–ˆ | â–ˆâ–ˆ /  \__|â–ˆâ–ˆâ–ˆâ–ˆ\ â–ˆâ–ˆ |
      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  |  â–ˆâ–ˆ |  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\    â–ˆâ–ˆ\â–ˆâ–ˆ\â–ˆâ–ˆ â–ˆâ–ˆ |â–ˆâ–ˆ |  â–ˆâ–ˆ | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\  â–ˆâ–ˆ | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\  â–ˆâ–ˆ\â–ˆâ–ˆ\â–ˆâ–ˆ |
      â–ˆâ–ˆ  __â–ˆâ–ˆ<   â–ˆâ–ˆ |  â–ˆâ–ˆ  ____/ â–ˆâ–ˆ  __|   â–ˆâ–ˆ \â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆ |â–ˆâ–ˆ |  â–ˆâ–ˆ | \______| â–ˆâ–ˆ | â–ˆâ–ˆ  __â–ˆâ–ˆ\ â–ˆâ–ˆ \â–ˆâ–ˆâ–ˆâ–ˆ |
      â–ˆâ–ˆ |  â–ˆâ–ˆ |  â–ˆâ–ˆ |  â–ˆâ–ˆ |      â–ˆâ–ˆ |      â–ˆâ–ˆ |\â–ˆ  /â–ˆâ–ˆ |â–ˆâ–ˆ |  â–ˆâ–ˆ |          â–ˆâ–ˆ | â–ˆâ–ˆ /  â–ˆâ–ˆ |â–ˆâ–ˆ |\â–ˆâ–ˆâ–ˆ |
      â–ˆâ–ˆ |  â–ˆâ–ˆ |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\ â–ˆâ–ˆ |      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\ â–ˆâ–ˆ | \_/ â–ˆâ–ˆ |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  |        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  |\â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  /
      \__|  \__|\______|\__|      \________|\__|     \__|\_______/         \______|\______/  \______/


            __|  |   |   __|   __|   _ \   __|   __|
          \__ \  |   |  (     (      __/ \__ \ \__ \
          ____/ \__,_| \___| \___| \___| ____/ ____/



|-------+--------+-------------------------------------------------------+--------------------------------------------------------|
| Row   | Persp. |                                                       |                                                        |
|-------+--------+-------------------------------------------------------+--------------------------------------------------------|
| i     | SCEN   | one of:                                               | SCEN/PRC_SUCCESS âœ…                                    |
|       |        | * SCEN/SHA2-256   = 1                                 |                                                        |
|       |        | * SCEN/RIPEMD-160 = 1                                 |                                                        |
|-------+--------+-------------------------------------------------------+--------------------------------------------------------|
| i + 1 | MISC   |                                                       | OOBðŸ´ = 1                                              |
|       |        |                                                       | OOB_INST = âŸ¦OOB_INST_SHA2-256âŸ§ / âŸ¦OOB_INST_RIPEMD-160âŸ§ |
|       |        |                                                       |                                                        |
|       |        |                                                       | TRUSTED INPUTS:                                        |
|       |        |                                                       | * cds                                                  |
|       |        |                                                       | * r@c                                                  |
|       |        |                                                       | * call_gas                                             |
|       |        |                                                       |                                                        |
|       |        |                                                       | JUSTIFICATION FOR:                                     |
|       |        |                                                       | * (implicit) compute gas_cost                          |
|       |        |                                                       | * hub_success        := [gas_cost â‰¤ call_gas]          |
|       |        |                                                       | * return_gas         := 0 âˆ¨ [call_gas - gas_cost]      |
|       |        |                                                       | * extract_call_data  := hub_success âˆ§ [cds â‰  0]        |
|       |        |                                                       | * empty_call_data    := hub_success âˆ§ [cds = 0]        |
|       |        |                                                       | * r@c_nonzero        := [r@c â‰  0]                      |
|       |        |                                                       |                                                        |
|       |        |                                                       | here: hub_success â‰¡ 1                                  |
|       |        |                                                       |                                                        |
|       |        | MMUðŸ´ = extract_call_data                             |                                                        |
|       |        | MMU_INST = MMU_INST_dataTransferRamToExoSansPadding   |                                                        |
|       |        |                                                       |                                                        |
|       |        | ID_SRC    := cn                                       |                                                        |
|       |        | SRC_OFF   := cdo                                      |                                                        |
|       |        | SIZE      := cds                                      |                                                        |
|       |        |                                                       |                                                        |
|       |        | ID_TGT    := 1 + HUB_ï‚–                                |                                                        |
|       |        | TGT_OFF   := 0                                        |                                                        |
|       |        | EXO_SUM   := âŸ¦1 << ripshaâŸ§                            |                                                        |
|       |        | PHASE     := âŸ¦Î¦_sha2_dataâŸ§ or âŸ¦Î¦_ripemd_dataâŸ§         |                                                        |
|-------+--------+-------------------------------------------------------+--------------------------------------------------------|
| i + 2 | MISC   | MMUðŸ´ = 1                                             | OOBðŸ´ = 0                                              |
|       |        |                                                       |                                                        |
|       |        | Case: empty_call_data = 1:                            |                                                        |
|       |        | ==========================                            |                                                        |
|       |        |                                                       |                                                        |
|       |        | MMU_INST =  âŸ¦MMU_INST_mstoreâŸ§                         |                                                        |
|       |        |                                                       |                                                        |
|       |        | LIMB_1 / LIMB_2 := HASH(( ))_hi / lo   (see below)    |                                                        |
|       |        | ID_TGT    := 1 + HUB_ï‚–                                |                                                        |
|       |        | SRC_OFF   := 0                                        |                                                        |
|       |        | TGT_OFF   := 0                                        |                                                        |
|       |        |                                                       |                                                        |
|       |        | Case: extract_call_data = 1:                          |                                                        |
|       |        | ============================                          |                                                        |
|       |        |                                                       |                                                        |
|       |        | MMU_INST =  âŸ¦MMU_INST_alignedExoToRamLimbTransplantsâŸ§ |                                                        |
|       |        |                                                       |                                                        |
|       |        | ID_SRC    := 1 + HUB_ï‚–                                |                                                        |
|       |        | ID_TGT    := 1 + HUB_ï‚–                                |                                                        |
|       |        | SRC_OFF   := 0                                        |                                                        |
|       |        | TGT_OFF   := 0                                        |                                                        |
|       |        | EXO_SUM   := exo_sum          (see below)             |                                                        |
|       |        | PHASE     := âŸ¦Î¦_sha2_resâŸ§ or âŸ¦Î¦_ripemd_resâŸ§           |                                                        |
|-------+--------+-------------------------------------------------------+--------------------------------------------------------|
| i + 3 | MISC   | MMUðŸ´    = r@c_nonzero                                | OOBðŸ´ = 0                                              |
|       |        | MMU_INST = <RETURN_like>                              |                                                        |
|       |        |                                                       |                                                        |
|       |        | CN_S      := 1 + HUB_ï‚–                                |                                                        |
|       |        | REF_OFF   := 0                                        |                                                        |
|       |        | REF_SIZE  := 32                                       |                                                        |
|       |        | CN_T      := cn                                       |                                                        |
|       |        | TGT_OFF   := r@o                                      |                                                        |
|       |        | SIZE      := r@c                                      |                                                        |
|-------+--------+-------------------------------------------------------+--------------------------------------------------------|
| i + 4 | CON    | updateReturnData()                                    |
|       |        |                                                       |
|       |        | RETURNER  = 1 + HUB_ï‚–                                 |
|       |        | RDO       = 0                                         |
|       |        | RDS       = 32                                        |
|-------+--------+-------------------------------------------------------|

We use the folowing shorthands:

CASE SCEN/SHA2-256:  
===================  
exo_sum   = 1 << sha2  
HASH(( )) = 0x e3b0c44298fc1c149afbf4c8996fb924 27ae41e4649b934ca495991b7852b855
                     
CASE SCEN/RIPEMD-160:
=====================
exo_sum   = 1 << ripemd
HASH(( )) = 0x 0000000000000000000000009c1185a5 c5e9fc54612808977ee8f548b2258d31
\end{verbatim}
\end{document}
