% !TeX TS-program = lualatex
\documentclass[varwidth=\maxdimen,margin=0.5cm,multi={verbatim}]{standalone}

\usepackage{fontspec}
\directlua{luaotfload.add_fallback
   ("emojifallback",
    {
      "NotoColorEmoji:mode=harf;"
    }
   )}

\setmonofont{JetBrains Mono NL Regular}[
  RawFeature={fallback=emojifallback}
]

\usepackage{../../../../../pkg/draculatheme}

\begin{document}
\begin{verbatim}

           ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\      ‚ñà‚ñà‚ñà\  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\  ‚ñà‚ñà‚ñà\
          ‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà  __‚ñà‚ñà\ ‚ñà‚ñà  _____|‚ñà‚ñà  __‚ñà‚ñà\\__‚ñà‚ñà  __|‚ñà‚ñà  _____|    ‚ñà‚ñà  _|‚ñà‚ñà  __‚ñà‚ñà\  \‚ñà‚ñà\
          ‚ñà‚ñà /  \__|‚ñà‚ñà |  ‚ñà‚ñà |‚ñà‚ñà |      ‚ñà‚ñà /  ‚ñà‚ñà |  ‚ñà‚ñà |   ‚ñà‚ñà |         ‚ñà‚ñà  /  \__/  ‚ñà‚ñà |  \‚ñà‚ñà\
          ‚ñà‚ñà |      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |‚ñà‚ñà‚ñà‚ñà‚ñà\    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà |  ‚ñà‚ñà |   ‚ñà‚ñà‚ñà‚ñà‚ñà\       ‚ñà‚ñà |    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |   ‚ñà‚ñà |
          ‚ñà‚ñà |      ‚ñà‚ñà  __‚ñà‚ñà< ‚ñà‚ñà  __|   ‚ñà‚ñà  __‚ñà‚ñà |  ‚ñà‚ñà |   ‚ñà‚ñà  __|      ‚ñà‚ñà |   ‚ñà‚ñà  ____/    ‚ñà‚ñà |
          ‚ñà‚ñà |  ‚ñà‚ñà\ ‚ñà‚ñà |  ‚ñà‚ñà |‚ñà‚ñà |      ‚ñà‚ñà |  ‚ñà‚ñà |  ‚ñà‚ñà |   ‚ñà‚ñà |         \‚ñà‚ñà\   ‚ñà‚ñà |        ‚ñà‚ñà  |
          \‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  |‚ñà‚ñà |  ‚ñà‚ñà |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\ ‚ñà‚ñà |  ‚ñà‚ñà |  ‚ñà‚ñà |   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\     \‚ñà‚ñà‚ñà\ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà\ ‚ñà‚ñà‚ñà  /
           \______/ \__|  \__|\________|\__|  \__|  \__|   \________|      \___|\________|\___/


                                                        |              _)        _)  |                         |
           __ \    _ \   __ \    _ \  __ `__ \   __ \   __|  |   |      |  __ \   |  __|       __|   _ \    _` |   _ \
           |   |  (   |  |   |   __/  |   |   |  |   |  |    |   |      |  |   |  |  |        (     (   |  (   |   __/
          _|  _| \___/  _|  _| \___| _|  _|  _|  .__/  \__| \__, |     _| _|  _| _| \__|     \___| \___/  \__,_| \___|
                                                 _|          ____/


                                                             /                _)  |  |                                    |
            __|  |   |   __|   __|   _ \   __|   __|        /      \ \  \   /  |  |  |       __|  _ \ \ \   /  _ \   __|  __|
          \__ \  |   |  (     (      __/ \__ \ \__ \       /        \ \  \ /   |  |  |      |     __/  \ \ /   __/  |     |
          ____/ \__,_| \___| \___| \___| ____/ ____/     _/          \_/\_/   _| _| _|     _|   \___|   \_/  \___| _|    \__|


|-----------+--------+----------------------------------------------------+-------------------------------------------------------------+--------------------+-----------|
| Row index | Persp. | Actions                                            | Notes                                                       | DOM_STAMP          | SUB_STAMP |
|:---------:+--------+----------------------------------------------------+-------------------------------------------------------------+--------------------+-----------|
|   i - 2   | STACK  |                                                    | required:                                                   |
|   i - 1   | STACK  |                                                    | * stack/STATICX ‚â° 0                                         |
|     ¬†     |        |                                                    | * stack/MXPX    ‚â° 0                                         |
|     ¬†     |        |                                                    | * stack/OOGX    ‚â° 0                                         |
|     ¬†     |        |                                                    | .      => XAHOY ‚â° 0                                         |
|-----------+--------+----------------------------------------------------+-------------------------------------------------------------|
|     i¬†    | SCEN   | ÔÑ¶ CREATE/ABORT ‚â° 1                                 |                                                             |
|     ¬†     |        |                                                    |                                                             |
|     ¬†     |        |                                                    | Impose that:                                                |
|     ¬†     |        |                                                    | .   ÔÑ¶ CREATE/EXCEPTION         ‚â° XAHOY ‚â° 0                  |
|     ¬†     |        |                                                    | .   ÔÑ¶ CREATE/ABORT             ‚â° OOB_aborting_condition     |
|     ¬†     |        |                                                    | .   ÔÑ¶ CREATE/failure_condition ‚â° OOB_failure_condition      |
|-----------+--------+----------------------------------------------------+-------------------------------------------------------------|
|   i + 1   | CON    | readContextData( current context )                 |                                                             |
|     ¬†     |        |                                                    |                                                             |
|     ¬†     |        | Impose that:                                       |                                                             |
|     ¬†     |        | .    context/IS_STATIC = stack/STATICX             |                                                             |
|     ¬†     |        |                                                    | Provides:                                                   |
|     ¬†     |        |                                                    | * con/CALL_STACK_DEPTH                                      |
|     ¬†     |        |                                                    | * con/ACCOUNT_ADDRESS  (I_a)                                |
|     ¬†     |        |                                                    |                                                             |
|     ¬†     |        |                                                    | Implicitly:                                                 |
|     ¬†     |        |                                                    | .   context/IS_STATIC = 0                                   |
|-----------+--------+----------------------------------------------------+-------------------------------------------------------------|
|   i + 2   | MISC   | misc/MXPüö© ‚â° 1                                     |                                                             |
|     ¬†     |        |                                                    | Provides:                                                   |
|     ¬†     |        |                                                    | * mxp/MXPX                                                  |
|     ¬†     |        |                                                    | * mxp/MXP_GAS                                               |
|     ¬†     |        |                                                    | * mxp/MXP_MTNTOP                                            |
|           |        | misc/STPüö© ‚â° 1                                     |                                                             |
|     ¬†     |        |                                                    | Provides:                                                   |
|     ¬†     |        |                                                    | * stp/OOGX                                                  |
|     ¬†     |        |                                                    | * stp/UPFRONT_GAS_COST                                      |
|     ¬†     |        |                                                    | * stp/63_64_ths                                             |
|           |        | misc/OOBüö© ‚â° 1                                     |                                                             |
|     ¬†     |        |                                                    | Provides:                                                   |
|     ¬†     |        |                                                    | * OOB_aborting_condition                                    |
|     ¬†     |        |                                                    | * OOB_failure_condition                                     |
|           |        | misc/MMUüö©  ‚â° 1                                    |                                                             |
|     ¬†     |        |                                                    |                                                             |
|     ¬†     |        | Impose that:                                       |                                                             |
|     ¬†     |        | .    misc/mxp/MXPX = stack/MXPX                    |                                                             |
|     ¬†     |        | .    misc/stp/OOGX = stack/OOGX                    |                                                             |
|     ¬†     |        |                                                    |                                                             |
|     ¬†     |        |                                                    | Implicitly:                                                 |
|     ¬†     |        |                                                    | .   misc/mxp/MXPX = 0                                       |
|     ¬†     |        |                                                    | .   misc/stp/OOGX = 0                                       |
|     ¬†     |        |                                                    | .   OOB_aborting_condition = 0                              |
|     ¬†     |        |                                                    | .   OOB_failure_condition  = 0                              |
|     ¬†     |        |                                                    | .   mxp/MXP_MTNTOP = 0  (i.e. size == 0)                    |
|-----------+--------+----------------------------------------------------+-------------------------------------------------------------+--------------------+-----------|
|   i + 3   | ACC    | Load account with address I_a                      |                                                             | œÑ ‚àô h + 0          | 0         |
|     ¬†     |        | Compute deployment address                         |                                                             |                    |           |
|     ¬†     |        | ‚§¥Ô∏èincrementNonce (i.e. nonce += 1)                 |                                                             |                    |           |
|     ¬†     |        | ‚§¥Ô∏èdecrementBalance (i.e. balance -= value)         |                                                             |                    |           |
|     ¬†     |        |                                                    | Provides:                                                   |                    |           |
|     ¬†     |        |                                                    | * acc/BALANCE                                               |                    |           |
|     ¬†     |        | computeDeploymentAddress()                         | * acc/DEPLOYMENT_ADDRESS ‚â° Œ¥                                |                    |           |
|     ¬†     |        |                                                    |                                                             |                    |           |
|     ¬†     |        |                                                    | Implicitly:                                                 |                    |           |
|     ¬†     |        |                                                    | .   [con/CALL_STACK_DEPTH ‚â† 1024]  ‚àß  [acc/BALANCE ‚â• value] |                    |           |
|     ¬†     |        |                                                    | .   (<== this triggers OOB_aborting_condition ‚â° 0)          |                    |           |
|-----------+--------+----------------------------------------------------+-------------------------------------------------------------+--------------------+-----------|
|   i + 4   | ACC    | Read account with address Œ¥                        |                                                             | œÑ ‚àô h + 1          | 0         |
|     ¬†     |        | ‚§¥Ô∏èincrementNonce            (i.e. nonce: 0 ‚Üí 1)    |                                                             |                    |           |
|     ¬†     |        | ‚§¥Ô∏èincrementBalance          (i.e. balance += value)|                                                             |                    |           |
|     ¬†     |        | ‚§¥Ô∏èincrementDeploymentNumber (i.e. depNumber += 1)  |                                                             |                    |           |
|     ¬†     |        | ‚§¥Ô∏èturnOnWarmth              (i.e. warmth ‚Üë)        |                                                             |                    |           |
|     ¬†     |        | updateCodeSize( size_lo )                          |                                                             |                    |           |
|     ¬†     |        | updateCodeHash( KECCAK( ‚àÖ ) )                      |                                                             |                    |           |
|     ¬†     |        |                                                    | Provides:                                                   |                    |           |
|     ¬†     |        |                                                    | * acc/NONCE                                                 |                    |           |
|     ¬†     |        |                                                    | * acc/HAS_CODE                                              |                    |           |
|     ¬†     |        | requestCodeFragmentIndex()                         | * acc/CODE_FRAGMENT_INDEX                                   |                    |           |
|     ¬†     |        |                                                    |                                                             |                    |           |
|     ¬†     |        |                                                    | Implicitly:                                                 |                    |           |
|     ¬†     |        |                                                    | .   acc/NONCE    = 0                                        |                    |           |
|     ¬†     |        |                                                    | .   acc/HAS_CODE = 0                                        |                    |           |
|     ¬†     |        |                                                    | .   (<== this triggers OOB_failure_condition ‚â° 0)           |                    |           |
|-----------+--------+----------------------------------------------------+-------------------------------------------------------------+--------------------+-----------|
|   i + 5   | ACC    | Load account with address I_a                      |                                                             | œÑ ‚àô œÅ_curr + Œµ_rev | œÑ ‚àô h + 2 |
|     ¬†     |        | ‚ôªÔ∏èsameAddress[5,3]                                 |                                                             |                    |           |
|     ¬†     |        | ‚è™undoNonceUpdate                                  |                                                             |                    |           |
|     ¬†     |        | ‚è™undoBalanceUpdate                                |                                                             |                    |           |
|     ¬†     |        | ‚è™undoCodeUpdate                                   |                                                             |                    |           |
|     ¬†     |        |                                                    | Provides:                                                   |                    |           |
|     ¬†     |        |                                                    | * acc/BALANCE                                               |                    |           |
|     ¬†     |        |                                                    | * acc/DEPLOYMENT_ADDRESS ‚â° Œ¥                                |                    |           |
|-----------+--------+----------------------------------------------------+-------------------------------------------------------------+--------------------+-----------|
|   i + 6   | ACC    | Read account with address Œ¥                        |                                                             | œÑ ‚àô œÅ_curr + Œµ_rev | œÑ ‚àô h + 3 |
|     ¬†     |        | ‚ôªÔ∏èsameAddress[6,4]                                 |                                                             |                    |           |
|     ¬†     |        | ‚è™undoNonceUpdate                                  |                                                             |                    |           |
|     ¬†     |        | ‚è™undoBalanceUpdate                                |                                                             |                    |           |
|     ¬†     |        | ‚è™undoDeploymentNumberAndStatus                    |                                                             |                    |           |
|     ¬†     |        | ‚è™undoWarmthUpdate                                 |                                                             |                    |           |
|     ¬†     |        |                                                    | Provides:                                                   |                    |           |
|     ¬†     |        |                                                    | * acc/NONCE                                                 |                    |           |
|     ¬†     |        |                                                    | * acc/HAS_CODE                                              |                    |           |
|-----------+--------+----------------------------------------------------+-------------------------------------------------------------+--------------------+-----------|
|   i + 7   | CON    | initializeDeploymentContext( next context )        |
|           |        | firstRowOfDeploymentContext( next context )        |
|           |        | justifyCreateeRevertData( next context )           |
|-----------+--------+----------------------------------------------------|

NOTE. We use the following shorthands

        * h      ‚â° HUB_STAMP
        * œÅ_curr ‚â° CONTEXT_REVERT_STAMP of current context

\end{verbatim}
\end{document}
