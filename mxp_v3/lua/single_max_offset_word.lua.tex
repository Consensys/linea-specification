% !TeX TS-program = lualatex
\documentclass[varwidth=\maxdimen,margin=0.5cm,multi={verbatim}]{standalone}

\usepackage{fontspec}
\directlua{luaotfload.add_fallback
   ("emojifallback",
    {
      "NotoColorEmoji:mode=harf;"
    }
   )}

\setmonofont{JetBrains Mono NF Regular}[
  RawFeature={fallback=emojifallback}
]

\usepackage{../../pkg/draculatheme}

\begin{document}
\begin{verbatim}

max_offset = max(max_offset_1, max_offset_2)  
max_offset_1 = offset_1 + size_1 - 1
max_offset_2 = offset_2 + size_2 - 1

compute quadratic cost (once for all)
linear cost (requires division by 32 in the case of word)

  |-----------+-------+----------------------------------------------------+-------+---------+---------+--------+-------------+-------------+----------+----------+-------------------+-------+--------------------------------|
  | Row index | SCNRI | scenario/SINGLE_MAX_OFFSET_WORD                    | COMPN | WCP_FLAG| EUC_FLAG| INST   | ARG_1_HI    | ARG_1_LO    | ARG_2_HI | ARG_2_LO | RES_A             | RES_B | Notes                          |
  |-----------+-------+----------------------------------------------------+-------+---------+---------+--------+-------------+-------------+----------+----------+-------------------+-------+--------------------------------|
  | i         | true  | true                                               |       |         |         |        |             |             |          |          |                   |       |                                |
  |-----------+-------+----------------------------------------------------+-------+---------+---------+--------+-------------+-------------+----------+----------+-------------------+-------+--------------------------------|
  | i + 1     |       |                                                    | true  | true    |         | ISZERO | size_1_hi   | size_1_lo   |          |          | size_1_iszero     | ∅     | at least one of the            |
  | i + 2     |       |                                                    | true  | true    |         | ISZERO | size_2_hi   | size_2_lo   |          |          | size_2_iszero     | ∅     | sizes must be nonzero          |
  |-----------+-------+----------------------------------------------------+-------+---------+---------+--------+-------------+-------------+----------+----------+-------------------+-------+--------------------------------|
  | i + 3     |       |                                                    | true  | true    |         | LT     | size_1_hi   | size_1_lo   | 0        | LMMS     | size_1_is_small   | ∅     | we require that neither        |
  | i + 4     |       |                                                    | true  | true    |         | LT     | size_2_hi   | size_2_lo   | 0        | LMMS     | size_2_is_small   | ∅     | of the MXPX conditions         |
  | i + 5     |       |                                                    | true  | true    |         | LT     | offset_1_hi | offset_1_lo | 0        | LMMS     | offset_1_is_small | ∅     | is fulfilled, see below        |
  | i + 6     |       |                                                    | true  | true    |         | LT     | offset_2_hi | offset_2_lo | 0        | LMMS     | offset_2_is_small | ∅     |                                |
  |-----------+-------+----------------------------------------------------+-------+---------+---------+--------+-------------+-------------+----------+----------+-------------------+-------+--------------------------------|
  | i + 7     |       |                                                    | true  |         | true    |        |             | max_offset + 1 |          |       32 | ceil                   |       | computing ceil(max_offset + 1 / 32)|
  | i + 8     |       |                                                    | true  |         | true    |        |             |    ceil * ceil |          |       512   |                   |       |                                |
  | i + 9     |       |                                                    | true  |         |         |        |             |             |          |          |                   |       |                                |
  | i + 10    |       |                                                    | true  |         |         |        |             |             |          |          |                   |       |                                |
  | i + 11    |       |                                                    | true  |         |         |        |             |             |          |          |                   |       |                                |
     
where 

  scenario/nontrivial_no_mxpx ≡ the sum of all nontrivial, unexceptional scenario flags

We impose that

- nontrivialRegimeHolds_{i} (as a consequence of scenario/nontrivial_{i} ≡ 1)
- mxpxExpression ≡ mxpxExpression_1 ∨ mxpxExpression_2 = false where

	mxpxExpression_1 ≡ [¬ size_1_is_small] ∨ [size_1_is_small ∧ [¬ offset_1_is_small]]
	mxpxExpression_2 ≡ [¬ size_2_is_small] ∨ [size_2_is_small ∧ [¬ offset_2_is_small]]

We will want to impose:
- on the macro-row:
	- macro/MXPX ≡ false
	- S1NZNOMXPX = 1 - size_1_iszero
	- S2NZNOMXPX = 1 - size_2_iszero
- on the scenario-row:

\end{verbatim}
\end{document}

